name: test_docker

on:
  push:
    branches: [ "master" ]
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
    - name: test docker
      run:  |
             git clone https://github.com/cloudera/ml-runtimes.git
             cd ml-runtimes
             ls
             echo "$PWD"
             docker build -t cml_3.9 -f 'pbj-workbench-python3.9-standard.Dockerfile' .
             docker run -i -t cml_3.9
             git clone https://github.com/ONSdigital/monthly-business-survey-results.git
             pip install .[dev]
             pytest
